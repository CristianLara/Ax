"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9274],{73689:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>u,toc:()=>d});var r=t(74848),a=t(28453),i=t(11470),o=t(19365);const s={id:"api",title:"APIs"},l=void 0,u={id:"api",title:"APIs",description:"The modular design of Ax enables three different usage modes, with different",source:"@site/../docs/api.md",sourceDirName:".",slug:"/api",permalink:"/Ax/docs/next/api",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedBy:"Cristian Lara",lastUpdatedAt:173317664e4,frontMatter:{id:"api",title:"APIs"},sidebar:"docs",previous:{title:"Installation",permalink:"/Ax/docs/next/installation"},next:{title:"Glossary",permalink:"/Ax/docs/next/glossary"}},c={},d=[];function p(e){const n={a:"a",code:"code",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["The modular design of Ax enables three different usage modes, with different\nbalances of structure to flexibility and reproducibility. Navigate to the\n",(0,r.jsx)(n.a,{href:"/tutorials",children:'"Tutorials" page'})," for an in-depth walk-through of each API and\nusage mode."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NOTE: We recommend the Service API for the vast majority of use cases."})," This\nAPI provides an ideal balance of flexibility and simplicity for most users, and\nwe are in the process of consolidating Ax usage around it more formally."]}),"\n",(0,r.jsx)(n.p,{children:"From most lightweight to fullest functionality, our APIs are:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Loop API"})," (",(0,r.jsx)(n.a,{href:"/tutorials/gpei_hartmann_loop.html",children:"tutorial"}),") is intended for\nsynchronous optimization loops, where ",(0,r.jsx)(n.a,{href:"/Ax/docs/next/glossary#trial",children:"trials"})," can be\nevaluated right away. With this API, optimization can be executed in a single\ncall and ",(0,r.jsx)(n.a,{href:"/Ax/docs/next/glossary#experiment",children:"experiment"})," introspection is available once\noptimization is complete. ",(0,r.jsx)(n.strong,{children:"Use this API only for the simplest use cases where\nrunning a single trial is fast and only one trial should be running at a\ntime."})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"[RECOMMENDED] Service API"}),"\n(",(0,r.jsx)(n.a,{href:"/tutorials/gpei_hartmann_service.html",children:"tutorial"}),") can be used as a\nlightweight service for parameter-tuning applications where trials might be\nevaluated in parallel and data is available asynchronously (e.g.\nhyperparameter or simulation optimization). It requires little to no knowledge\nof Ax data structures and easily integrates with various schedulers. In this\nmode, Ax suggests one-",(0,r.jsx)(n.a,{href:"/Ax/docs/next/glossary#arm",children:"arm"})," trials to be evaluated by the\nclient application, and expects them to be completed with\n",(0,r.jsx)(n.a,{href:"/Ax/docs/next/glossary#metric",children:"metric"})," data when available. ",(0,r.jsx)(n.strong,{children:"This is our most popular\nAPI and a good place to start as a new user. Use it to leverage nearly full\nhyperparameter optimization functionality of Ax without the need to learn its\narchitecture and how things work under the hood."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["In both the Loop and the Service API, it is possible to configure the\noptimization algorithm via an Ax ",(0,r.jsx)(n.code,{children:"GenerationStrategy"}),"\n(",(0,r.jsx)(n.a,{href:"/tutorials/generation_strategy.html",children:"tutorial"}),"), so use of Developer API\nis not required to control the optimization algorithm in Ax."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Developer API"})," (",(0,r.jsx)(n.a,{href:"/tutorials/gpei_hartmann_developer.html",children:"tutorial"}),") is for\nad-hoc use by data scientists, machine learning engineers, and researchers.\nThe developer API allows for a great deal of customization and introspection,\nand is recommended for those who plan to use Ax to optimize A/B tests. Using\nthe developer API requires some knowledge of ",(0,r.jsx)(n.a,{href:"/Ax/docs/next/core",children:"Ax architecture"}),". ",(0,r.jsxs)(n.strong,{children:["Use\nthis API if you are looking to perform field experiments with ",(0,r.jsx)(n.code,{children:"BatchTrial"}),"-s,\ncustomize or contribute to Ax, or leverage advanced functionality that is not\nexposed in other APIs."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["While not an API, the ",(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"Scheduler"})}),"\n(",(0,r.jsx)(n.a,{href:"/tutorials/scheduler.html",children:"tutorial"}),") is an important and distinct\nuse-case of the Ax Developer API. With the ",(0,r.jsx)(n.code,{children:"Scheduler"}),", it's possible to run\na configurable, managed closed-loop optimization where trials are deployed\nand polled in an async fashion and no human intervention/oversight is\nrequired until the experiment is complete. ",(0,r.jsxs)(n.strong,{children:["Use the ",(0,r.jsx)(n.code,{children:"Scheduler"})," when you\nare looking to configure and start a full experiment that will need to\ninteract with an external system to evaluate trials."]})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Here is a comparison of the three APIs in the simple case of evaluating the\nunconstrained synthetic Branin function:"}),"\n",(0,r.jsxs)(i.A,{children:[(0,r.jsx)(o.A,{value:"Loop",label:"Loop",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'\nfrom ax import optimize\nfrom ax.utils.measurement.synthetic_functions import branin\n\nbest_parameters, values, experiment, model = optimize(\n    parameters=[\n        {\n            "name": "x1",\n            "type": "range",\n            "bounds": [-5.0, 10.0],\n        },\n        {\n            "name": "x2",\n            "type": "range",\n            "bounds": [0.0, 10.0],\n        },\n    ],\n    evaluation_function=lambda p: (branin(p["x1"], p["x2"]), 0.0),\n    minimize=True,\n)\n\n'})})}),(0,r.jsx)(o.A,{value:"Service",label:"Service",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'\nfrom ax.service.ax_client import AxClient, ObjectiveProperties\nfrom ax.utils.measurement.synthetic_functions import branin\n\nax_client = AxClient()\nax_client.create_experiment(\n    name="branin_test_experiment",\n    parameters=[\n        {\n            "name": "x1",\n            "type": "range",\n            "bounds": [-5.0, 10.0],\n            "value_type": "float",\n        },\n        {\n            "name": "x2",\n            "type": "range",\n            "bounds": [0.0, 10.0],\n        },\n    ],\n    objectives={"branin": ObjectiveProperties(minimize=True)},\n)\n\nfor _ in range(15):\n    parameters, trial_index = ax_client.get_next_trial()\n    ax_client.complete_trial(trial_index=trial_index, raw_data=branin(parameters["x1"], parameters["x2"]))\n\nbest_parameters, metrics = ax_client.get_best_parameters()\n\n'})})}),(0,r.jsx)(o.A,{value:"Developer",label:"Developer",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'\nfrom ax import *\n\n\nclass MockRunner(Runner):\n    def run(self, trial):\n        return {"name": str(trial.index)}\n\n\nbranin_search_space = SearchSpace(\n    parameters=[\n        RangeParameter(\n            name="x1", parameter_type=ParameterType.FLOAT, lower=-5, upper=10\n        ),\n        RangeParameter(\n            name="x2", parameter_type=ParameterType.FLOAT, lower=0, upper=15\n        ),\n    ]\n)\nexp = Experiment(\n    name="test_branin",\n    search_space=branin_search_space,\n    optimization_config=OptimizationConfig(\n        objective=Objective(\n            metric=BraninMetric(name="branin", param_names=["x1", "x2"]),\n            minimize=True,\n        ),\n    ),\n    runner=MockRunner(),\n)\n\nsobol = Models.SOBOL(exp.search_space)\nfor i in range(5):\n    trial = exp.new_trial(generator_run=sobol.gen(1))\n    trial.run()\n    trial.mark_completed()\n\nbest_arm = None\nfor i in range(15):\n    gpei = Models.BOTORCH_MODULAR(experiment=exp, data=exp.fetch_data())\n    generator_run = gpei.gen(1)\n    best_arm, _ = generator_run.best_arm_predictions\n    trial = exp.new_trial(generator_run=generator_run)\n    trial.run()\n    trial.mark_completed()\n\nexp.fetch_data()\nbest_parameters = best_arm.parameters\n\n'})})}),(0,r.jsx)(o.A,{value:"Scheduler",label:"Scheduler",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-py",children:'\nfrom ax import *\nfrom ax.modelbridge.generation_strategy import GenerationStrategy\nfrom ax.service import Scheduler\n\n# Full `Experiment` and `GenerationStrategy` instantiation\n# omitted for brevity, refer to the "Tutorials" page for detail.\nexperiment = Experiment(...)\ngeneration_strategy = GenerationStrategy(...)\n\nscheduler = Scheduler(\n    experiment=experiment,\n    generation_strategy=generation_strategy,\n    options=SchedulerOptions(),  # Configurations for how to run the experiment\n)\n\nscheduler.run_n_trials(100)  # Automate running 100 trials and reporting results\n\n'})})})]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},19365:(e,n,t)=>{t.d(n,{A:()=>o});t(96540);var r=t(18215);const a={tabItem:"tabItem_Ymn6"};var i=t(74848);function o(e){var n=e.children,t=e.hidden,o=e.className;return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,o),hidden:t,children:n})}},11470:(e,n,t)=>{t.d(n,{A:()=>j});var r=t(96540),a=t(18215),i=t(23104),o=t(56347),s=t(205),l=t(57485),u=t(31682),c=t(70679);function d(e){var n,t;return null!=(n=null==(t=r.Children.toArray(e).filter((function(e){return"\n"!==e})).map((function(e){if(!e||(0,r.isValidElement)(e)&&((n=e.props)&&"object"==typeof n&&"value"in n))return e;var n;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:t.filter(Boolean))?n:[]}function p(e){var n=e.values,t=e.children;return(0,r.useMemo)((function(){var e=null!=n?n:function(e){return d(e).map((function(e){var n=e.props;return{value:n.value,label:n.label,attributes:n.attributes,default:n.default}}))}(t);return function(e){var n=(0,u.XI)(e,(function(e,n){return e.value===n.value}));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,t])}function h(e){var n=e.value;return e.tabValues.some((function(e){return e.value===n}))}function m(e){var n=e.queryString,t=void 0!==n&&n,a=e.groupId,i=(0,o.W6)(),s=function(e){var n=e.queryString,t=void 0!==n&&n,r=e.groupId;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=r?r:null}({queryString:t,groupId:a});return[(0,l.aZ)(s),(0,r.useCallback)((function(e){if(s){var n=new URLSearchParams(i.location.search);n.set(s,e),i.replace(Object.assign({},i.location,{search:n.toString()}))}}),[s,i])]}function f(e){var n,t,a,i,o=e.defaultValue,l=e.queryString,u=void 0!==l&&l,d=e.groupId,f=p(e),x=(0,r.useState)((function(){return function(e){var n,t=e.defaultValue,r=e.tabValues;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:r}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+r.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}var a=null!=(n=r.find((function(e){return e.default})))?n:r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:o,tabValues:f})})),g=x[0],b=x[1],v=m({queryString:u,groupId:d}),y=v[0],_=v[1],j=(n=function(e){return e?"docusaurus.tab."+e:null}({groupId:d}.groupId),t=(0,c.Dv)(n),a=t[0],i=t[1],[a,(0,r.useCallback)((function(e){n&&i.set(e)}),[n,i])]),A=j[0],w=j[1],I=function(){var e=null!=y?y:A;return h({value:e,tabValues:f})?e:null}();return(0,s.A)((function(){I&&b(I)}),[I]),{selectedValue:g,selectValue:(0,r.useCallback)((function(e){if(!h({value:e,tabValues:f}))throw new Error("Can't select invalid tab value="+e);b(e),_(e),w(e)}),[_,w,f]),tabValues:f}}var x=t(92303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(74848);function v(e){var n=e.className,t=e.block,r=e.selectedValue,o=e.selectValue,s=e.tabValues,l=[],u=(0,i.a_)().blockElementScrollPositionUntilNextRender,c=function(e){var n=e.currentTarget,t=l.indexOf(n),a=s[t].value;a!==r&&(u(n),o(a))},d=function(e){var n,t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":var r,a=l.indexOf(e.currentTarget)+1;t=null!=(r=l[a])?r:l[0];break;case"ArrowLeft":var i,o=l.indexOf(e.currentTarget)-1;t=null!=(i=l[o])?i:l[l.length-1]}null==(n=t)||n.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},n),children:s.map((function(e){var n=e.value,t=e.label,i=e.attributes;return(0,b.jsx)("li",Object.assign({role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:function(e){return l.push(e)},onKeyDown:d,onClick:c},i,{className:(0,a.A)("tabs__item",g.tabItem,null==i?void 0:i.className,{"tabs__item--active":r===n}),children:null!=t?t:n}),n)}))})}function y(e){var n=e.lazy,t=e.children,i=e.selectedValue,o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){var s=o.find((function(e){return e.props.value===i}));return s?(0,r.cloneElement)(s,{className:(0,a.A)("margin-top--md",s.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:o.map((function(e,n){return(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==i})}))})}function _(e){var n=f(e);return(0,b.jsxs)("div",{className:(0,a.A)("tabs-container",g.tabList),children:[(0,b.jsx)(v,Object.assign({},n,e)),(0,b.jsx)(y,Object.assign({},n,e))]})}function j(e){var n=(0,x.A)();return(0,b.jsx)(_,Object.assign({},e,{children:d(e.children)}),String(n))}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>s});var r=t(96540);const a={},i=r.createContext(a);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);